import{c as J,r as m,j as e,m as Ne,n as U,q as we,o as ke,d as Ce,e as Ie,B as b,t as R,I as Te,C as _,f as Se,p as Fe,U as Q}from"./index-hJVCkv7e.js";import{e as X,f as Pe,u as Z,P as O,g as S,h as ee,i as se,j as Re,k as Oe,L as K,B as V,D as E,b as M,c as A,d as $}from"./badge-C9jT8Gnn.js";import{S as Ee,a as Me,b as Ae,c as $e,d as _e,C as De}from"./sheet-Cij3qWhQ.js";import{a as Be,S as Ue}from"./shopping-bag-B1Afa7R_.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],W=J("arrow-left",Le);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],qe=J("shopping-cart",Ge);var q="rovingFocusGroup.onEntryFocus",Ke={bubbles:!1,cancelable:!0},D="RovingFocusGroup",[z,te,ze]=Pe(D),[Ve,ae]=X(D,[ze]),[He,Ye]=Ve(D),ne=m.forwardRef((s,i)=>e.jsx(z.Provider,{scope:s.__scopeRovingFocusGroup,children:e.jsx(z.Slot,{scope:s.__scopeRovingFocusGroup,children:e.jsx(Qe,{...s,ref:i})})}));ne.displayName=D;var Qe=m.forwardRef((s,i)=>{const{__scopeRovingFocusGroup:u,orientation:a,loop:p=!1,dir:n,currentTabStopId:o,defaultCurrentTabStopId:j,onCurrentTabStopIdChange:h,onEntryFocus:f,preventScrollOnEntryFocus:r=!1,...c}=s,g=m.useRef(null),w=Ne(i,g),C=ee(n),[k,l]=se({prop:o,defaultProp:j??null,onChange:h,caller:D}),[v,T]=m.useState(!1),N=Re(f),d=te(u),t=m.useRef(!1),[x,I]=m.useState(0);return m.useEffect(()=>{const y=g.current;if(y)return y.addEventListener(q,N),()=>y.removeEventListener(q,N)},[N]),e.jsx(He,{scope:u,orientation:a,dir:C,loop:p,currentTabStopId:k,onItemFocus:m.useCallback(y=>l(y),[l]),onItemShiftTab:m.useCallback(()=>T(!0),[]),onFocusableItemAdd:m.useCallback(()=>I(y=>y+1),[]),onFocusableItemRemove:m.useCallback(()=>I(y=>y-1),[]),children:e.jsx(O.div,{tabIndex:v||x===0?-1:0,"data-orientation":a,...c,ref:w,style:{outline:"none",...s.style},onMouseDown:S(s.onMouseDown,()=>{t.current=!0}),onFocus:S(s.onFocus,y=>{const P=!t.current;if(y.target===y.currentTarget&&P&&!v){const Y=new CustomEvent(q,Ke);if(y.currentTarget.dispatchEvent(Y),!Y.defaultPrevented){const G=d().filter(F=>F.focusable),je=G.find(F=>F.active),ve=G.find(F=>F.id===k),ye=[je,ve,...G].filter(Boolean).map(F=>F.ref.current);le(ye,r)}}t.current=!1}),onBlur:S(s.onBlur,()=>T(!1))})})}),re="RovingFocusGroupItem",ie=m.forwardRef((s,i)=>{const{__scopeRovingFocusGroup:u,focusable:a=!0,active:p=!1,tabStopId:n,children:o,...j}=s,h=Z(),f=n||h,r=Ye(re,u),c=r.currentTabStopId===f,g=te(u),{onFocusableItemAdd:w,onFocusableItemRemove:C,currentTabStopId:k}=r;return m.useEffect(()=>{if(a)return w(),()=>C()},[a,w,C]),e.jsx(z.ItemSlot,{scope:u,id:f,focusable:a,active:p,children:e.jsx(O.span,{tabIndex:c?0:-1,"data-orientation":r.orientation,...j,ref:i,onMouseDown:S(s.onMouseDown,l=>{a?r.onItemFocus(f):l.preventDefault()}),onFocus:S(s.onFocus,()=>r.onItemFocus(f)),onKeyDown:S(s.onKeyDown,l=>{if(l.key==="Tab"&&l.shiftKey){r.onItemShiftTab();return}if(l.target!==l.currentTarget)return;const v=Xe(l,r.orientation,r.dir);if(v!==void 0){if(l.metaKey||l.ctrlKey||l.altKey||l.shiftKey)return;l.preventDefault();let N=g().filter(d=>d.focusable).map(d=>d.ref.current);if(v==="last")N.reverse();else if(v==="prev"||v==="next"){v==="prev"&&N.reverse();const d=N.indexOf(l.currentTarget);N=r.loop?Ze(N,d+1):N.slice(d+1)}setTimeout(()=>le(N))}}),children:typeof o=="function"?o({isCurrentTabStop:c,hasTabStop:k!=null}):o})})});ie.displayName=re;var We={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Je(s,i){return i!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function Xe(s,i,u){const a=Je(s.key,u);if(!(i==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(i==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return We[a]}function le(s,i=!1){const u=document.activeElement;for(const a of s)if(a===u||(a.focus({preventScroll:i}),document.activeElement!==u))return}function Ze(s,i){return s.map((u,a)=>s[(i+a)%s.length])}var es=ne,ss=ie,L="Tabs",[ts]=X(L,[ae]),ce=ae(),[as,H]=ts(L),oe=m.forwardRef((s,i)=>{const{__scopeTabs:u,value:a,onValueChange:p,defaultValue:n,orientation:o="horizontal",dir:j,activationMode:h="automatic",...f}=s,r=ee(j),[c,g]=se({prop:a,onChange:p,defaultProp:n??"",caller:L});return e.jsx(as,{scope:u,baseId:Z(),value:c,onValueChange:g,orientation:o,dir:r,activationMode:h,children:e.jsx(O.div,{dir:r,"data-orientation":o,...f,ref:i})})});oe.displayName=L;var de="TabsList",ue=m.forwardRef((s,i)=>{const{__scopeTabs:u,loop:a=!0,...p}=s,n=H(de,u),o=ce(u);return e.jsx(es,{asChild:!0,...o,orientation:n.orientation,dir:n.dir,loop:a,children:e.jsx(O.div,{role:"tablist","aria-orientation":n.orientation,...p,ref:i})})});ue.displayName=de;var me="TabsTrigger",he=m.forwardRef((s,i)=>{const{__scopeTabs:u,value:a,disabled:p=!1,...n}=s,o=H(me,u),j=ce(u),h=ge(o.baseId,a),f=fe(o.baseId,a),r=a===o.value;return e.jsx(ss,{asChild:!0,...j,focusable:!p,active:r,children:e.jsx(O.button,{type:"button",role:"tab","aria-selected":r,"aria-controls":f,"data-state":r?"active":"inactive","data-disabled":p?"":void 0,disabled:p,id:h,...n,ref:i,onMouseDown:S(s.onMouseDown,c=>{!p&&c.button===0&&c.ctrlKey===!1?o.onValueChange(a):c.preventDefault()}),onKeyDown:S(s.onKeyDown,c=>{[" ","Enter"].includes(c.key)&&o.onValueChange(a)}),onFocus:S(s.onFocus,()=>{const c=o.activationMode!=="manual";!r&&!p&&c&&o.onValueChange(a)})})})});he.displayName=me;var xe="TabsContent",pe=m.forwardRef((s,i)=>{const{__scopeTabs:u,value:a,forceMount:p,children:n,...o}=s,j=H(xe,u),h=ge(j.baseId,a),f=fe(j.baseId,a),r=a===j.value,c=m.useRef(r);return m.useEffect(()=>{const g=requestAnimationFrame(()=>c.current=!1);return()=>cancelAnimationFrame(g)},[]),e.jsx(Oe,{present:p||r,children:({present:g})=>e.jsx(O.div,{"data-state":r?"active":"inactive","data-orientation":j.orientation,role:"tabpanel","aria-labelledby":h,hidden:!g,id:f,tabIndex:0,...o,ref:i,style:{...s.style,animationDuration:c.current?"0s":void 0},children:g&&n})})});pe.displayName=xe;function ge(s,i){return`${s}-trigger-${i}`}function fe(s,i){return`${s}-content-${i}`}var ns=oe,rs=ue,is=he,ls=pe;function cs({className:s,...i}){return e.jsx(ns,{"data-slot":"tabs",className:U("flex flex-col gap-2",s),...i})}function os({className:s,...i}){return e.jsx(rs,{"data-slot":"tabs-list",className:U("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",s),...i})}function B({className:s,...i}){return e.jsx(is,{"data-slot":"tabs-trigger",className:U("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...i})}function ds({className:s,...i}){return e.jsx(ls,{"data-slot":"tabs-content",className:U("flex-1 outline-none",s),...i})}function us({tableNumber:s,onBack:i,onSubmitOrder:u,onLogout:a}){const[p,n]=m.useState([]),[o,j]=m.useState(""),[h,f]=m.useState([]),[r,c]=m.useState(!1),[g,w]=m.useState(!0);m.useEffect(()=>{const d=we(Ce(Se,"menu"),ke("name")),t=Ie(d,x=>{const I=[];x.forEach(y=>{const P=y.data();I.push({id:y.id,name:P.name,price:P.price,category:P.category,imageUrl:P.imageUrl})}),n(I),w(!1)});return()=>t()},[]);const C=d=>{const t=h.find(x=>x.id===d.id);f(t?h.map(x=>x.id===d.id?{...x,quantity:x.quantity+1}:x):[...h,{...d,quantity:1}])},k=(d,t)=>{f(h.map(x=>x.id===d?{...x,quantity:Math.max(0,x.quantity+t)}:x).filter(x=>x.quantity>0))},l=()=>h.reduce((d,t)=>d+t.quantity,0),v=()=>h.reduce((d,t)=>d+t.price*t.quantity,0),T=p.filter(d=>d.name.toLowerCase().includes(o.toLowerCase())),N=()=>{u(s,h),f([]),i()};return g?e.jsxs("div",{className:"pb-24",children:[e.jsx("div",{className:"p-4 bg-white border-b sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{variant:"ghost",size:"sm",onClick:i,children:e.jsx(W,{className:"w-4 h-4"})}),e.jsxs("h2",{children:[R("createOrder"),s>0?` - ${R("table")} ${s}`:""]})]}),e.jsx(b,{variant:"ghost",size:"sm",onClick:a,className:"text-gray-600",children:e.jsx(K,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading menu..."})]})})]}):e.jsxs("div",{className:"pb-24",children:[e.jsxs("div",{className:"p-4 bg-white border-b sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{variant:"ghost",size:"sm",onClick:i,children:e.jsx(W,{className:"w-4 h-4"})}),e.jsxs("h2",{children:[R("createOrder"),s>0?` - ${R("table")} ${s}`:""]})]}),e.jsx(b,{variant:"ghost",size:"sm",onClick:a,className:"text-gray-600",children:e.jsx(K,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(Te,{placeholder:"Search menu items...",value:o,onChange:d=>j(d.target.value),className:"pl-10"})]})]}),e.jsxs(cs,{defaultValue:"Food",className:"p-4",children:[e.jsxs(os,{className:"flex gap-2 mb-4 overflow-x-auto pb-2 bg-transparent h-auto p-0",children:[e.jsx(B,{value:"Food",className:"flex-1 min-w-0 px-4 py-3 rounded-lg font-medium transition-all data-[state=active]:bg-blue-600 data-[state=active]:text-white data-[state=active]:shadow-md border border-gray-200 hover:border-blue-300 bg-white",children:"ðŸ½ï¸ Food"}),e.jsx(B,{value:"Food-Butcher",className:"flex-1 min-w-0 px-4 py-3 rounded-lg font-medium transition-all data-[state=active]:bg-orange-600 data-[state=active]:text-white data-[state=active]:shadow-md border border-gray-200 hover:border-orange-300 bg-white",children:"ðŸ¥© Butcher"}),e.jsx(B,{value:"Drinks",className:"flex-1 min-w-0 px-4 py-3 rounded-lg font-medium transition-all data-[state=active]:bg-purple-600 data-[state=active]:text-white data-[state=active]:shadow-md border border-gray-200 hover:border-purple-300 bg-white",children:"ðŸ¹ Drinks"}),e.jsx(B,{value:"Desserts",className:"flex-1 min-w-0 px-4 py-3 rounded-lg font-medium transition-all data-[state=active]:bg-pink-600 data-[state=active]:text-white data-[state=active]:shadow-md border border-gray-200 hover:border-pink-300 bg-white",children:"ðŸ° Desserts"})]}),["Food","Food-Butcher","Drinks","Desserts"].map(d=>e.jsx(ds,{value:d,className:"space-y-3 mt-4",children:T.filter(t=>t.category===d).map(t=>e.jsx(_,{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>C(t),children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.name,className:"h-14 w-14 object-cover rounded border flex-shrink-0"}):e.jsx("div",{className:"h-14 w-14 rounded border bg-gray-100 flex items-center justify-center text-gray-400 text-xs flex-shrink-0",children:"No Image"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:t.name}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["$",t.price.toFixed(2)]})]})]}),e.jsx(b,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 shrink-0",children:"Add"})]})},t.id))},d))]}),h.length>0&&e.jsx("div",{className:"fixed bottom-16 left-0 right-0 p-4 bg-white border-t",children:e.jsxs(Ee,{open:r,onOpenChange:c,children:[e.jsx(Me,{asChild:!0,children:e.jsxs(b,{className:"w-full bg-blue-600 hover:bg-blue-700",children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"View Cart (",l()," items)"]})}),e.jsxs(Ae,{side:"bottom",className:"h-[80vh]",children:[e.jsx($e,{children:e.jsxs(_e,{children:[R("order"),s>0?` - ${R("table")} ${s}`:""]})}),e.jsx("div",{className:"mt-4 space-y-3 overflow-y-auto max-h-[calc(80vh-200px)]",children:h.map(d=>e.jsx(_,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[d.imageUrl?e.jsx("img",{src:d.imageUrl,alt:d.name,className:"h-12 w-12 object-cover rounded border flex-shrink-0"}):e.jsx("div",{className:"h-12 w-12 rounded border bg-gray-100 flex items-center justify-center text-gray-400 text-xs flex-shrink-0",children:"No Image"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"truncate",children:d.name}),e.jsxs("p",{className:"text-gray-600",children:["$",d.price.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>k(d.id,-1),children:"-"}),e.jsx("span",{children:d.quantity}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>k(d.id,1),children:"+"})]})]})},d.id))}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-white border-t",children:[e.jsxs("div",{className:"flex justify-between mb-3",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["$",v().toFixed(2)]})]}),e.jsx(b,{className:"w-full bg-green-600 hover:bg-green-700",onClick:N,children:"Submit Order"})]})]})]})})]})}const ms={pending:"bg-orange-500","in-kitchen":"bg-orange-500","at-bar":"bg-purple-500",ready:"bg-green-500",picked:"bg-purple-500",paid:"bg-blue-500",confirmed:"bg-gray-500"},hs={pending:"Pending","in-kitchen":"In Kitchen","at-bar":"At Bar",ready:"Ready for Pickup",picked:"Picked Up",paid:"Paid",confirmed:"Confirmed"};function be({orderId:s,orderNumber:i,tableNumber:u,status:a,itemCount:p,timeElapsed:n,onClick:o}){return e.jsxs(_,{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:o,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-500",children:["Order #",i||s]}),e.jsxs("p",{className:"mt-1",children:["Table ",u]})]}),e.jsx(V,{className:`${ms[a]} text-white border-0`,children:hs[a]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 text-gray-600",children:[e.jsxs("span",{children:[p," items"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{children:n})]})]})]})}function xs({orders:s,onMarkAsPaid:i,onPickUp:u,onCancelOrder:a,onMobileBankingPayment:p}){const[n,o]=m.useState(null),[j,h]=m.useState(!1),f=m.useRef(null),r=Fe(),c={title:r==="am"?"á‹¨áŠ¥áŠ” á‰µá‹•á‹›á‹žá‰½":"My Orders",table:r==="am"?"áŒ áˆ¨áŒ´á‹›":"Table",items:r==="am"?"áŠ•áŒ¥áˆŽá‰½":"Items",total:r==="am"?"áŒ á‰…áˆ‹áˆ‹":"Total",empty:r==="am"?"áˆáŠ•áˆ áŠ•á‰ á‰µá‹•á‹›á‹žá‰½ á‹¨áˆ‰áˆ":"No active orders",cancelOrder:r==="am"?"á‰µá‹•á‹›á‹™áŠ• áˆ°áˆ­á‹":"Cancel Order",generateBill:r==="am"?"áˆ˜áŒ¨áˆ¨áˆ» á‰¢áˆ ááŒ áˆ­":"Generate Final Bill",pickUp:r==="am"?"áˆ˜á‹áˆ°á‹µ":"Pick Up",markAsPaid:r==="am"?"áŠ­áá‹« á‰°áŠ¨ááˆáˆ á‹­áˆ‰":"Mark as Paid",paid:r==="am"?"áŠ­áá‹« á‰°áŠ¨ááˆáˆ":"Paid",paymentMethodTitle:r==="am"?"á‹¨áŠ­áá‹« á‹˜á‹´áŠ• á‹­áˆáˆ¨áŒ¡":"Select Payment Method",cash:r==="am"?"áŒ¥áˆ¬ áŒˆáŠ•á‹˜á‰¥":"Cash",mobileUpload:r==="am"?"áˆžá‰£á‹­áˆ á‰£áŠ•áŠ­ áŠ­áá‹« (áˆ›áˆµáˆ¨áŒƒ á‹«áˆµáŒˆá‰¡)":"Mobile Banking (Upload Proof)"},g={ready:r==="am"?"áˆˆáˆ˜á‹áˆ°á‹µ á‹áŒ áŠá‹":"Ready for Pickup",picked:r==="am"?"á‰°á‹ˆáˆ°á‹°":"Picked Up",inKitchen:r==="am"?"á‰ áˆáŒá‰¥ á‰¤á‰µ á‹áˆµáŒ¥":"In Kitchen",paid:r==="am"?"áŠ­áá‹« á‰°áŠ¨ááˆáˆ":"Paid",pending:r==="am"?"á‰ áˆ˜áŒ á‰£á‰ á‰… áˆ‹á‹­":"Pending"},w=l=>l.reduce((v,T)=>v+T.price*T.quantity,0),C=l=>{n&&(i(n.id,l),h(!1),o(null))},k=s.filter(l=>l.status!=="confirmed");return e.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[e.jsx("h2",{children:c.title}),k.length===0?e.jsx(_,{className:"p-8 text-center text-gray-500",children:c.empty}):e.jsx("div",{className:"space-y-3",children:k.map(l=>e.jsx(be,{orderId:l.id,orderNumber:l.orderNumber,tableNumber:l.tableNumber,status:l.status,itemCount:l.items.length,timeElapsed:l.timeElapsed,onClick:()=>o(l)},l.id))}),e.jsx(E,{open:!!n&&!j,onOpenChange:l=>{l||o(null)},children:e.jsxs(M,{children:[e.jsx(A,{children:e.jsxs($,{children:["Order #",n?.orderNumber||n?.id]})}),n&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-600",children:[c.table," ",n.tableNumber]}),e.jsx(V,{className:`mt-2 ${n.status==="ready"?"bg-green-500":n.status==="picked"?"bg-blue-500":n.status==="in-kitchen"?"bg-orange-500":n.status==="paid"?"bg-green-600":"bg-gray-500"} text-white border-0`,children:n.status==="ready"?g.ready:n.status==="picked"?g.picked:n.status==="in-kitchen"?g.inKitchen:n.status==="paid"?g.paid:g.pending})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"mb-2",children:[c.items,":"]}),e.jsx("div",{className:"space-y-2",children:n.items.map((l,v)=>e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsxs("span",{children:[l.quantity,"x ",l.name]}),e.jsxs("span",{children:["$",(l.price*l.quantity).toFixed(2)]})]},v))})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[c.total,":"]}),e.jsxs("span",{children:["$",w(n.items).toFixed(2)]})]})}),e.jsxs("div",{className:"space-y-2",children:[n.status!=="paid"&&n.status!=="confirmed"&&a&&e.jsx(b,{className:"w-full bg-red-600 hover:bg-red-700",onClick:()=>{a(n.id),h(!1),o(null)},children:c.cancelOrder}),e.jsx(b,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>{alert(`${r==="am"?`áˆˆá‰µá‹•á‹›á‹ #${n.orderNumber||n.id} áˆ˜áŒ¨áˆ¨áˆ» á‰¢áˆ á‰°áˆáŒ¥áˆ¯áˆ
${c.total}: $${w(n.items).toFixed(2)}`:`Bill generated for Order #${n.orderNumber||n.id}
${c.total}: $${w(n.items).toFixed(2)}`}`),h(!1),o(null)},children:c.generateBill}),n.status==="ready"&&e.jsx(b,{className:"w-full bg-purple-600 hover:bg-purple-700",onClick:()=>{u(n.id),o(null)},children:c.pickUp}),(n.status==="picked"||n.status==="paid")&&e.jsx(b,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>h(!0),children:n.status==="paid"?c.paid:c.markAsPaid})]})]})]})}),e.jsx(E,{open:j,onOpenChange:h,children:e.jsxs(M,{children:[e.jsx(A,{children:e.jsx($,{children:c.paymentMethodTitle})}),e.jsx("input",{ref:f,type:"file",accept:"image/*",style:{display:"none"},onChange:async l=>{const v=l.target.files?.[0];if(v&&n)try{await p(n.id,v)}finally{h(!1),o(null),l.currentTarget.value=""}}}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>C("cash"),children:c.cash}),e.jsx(b,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>{f.current?.click()},children:c.mobileUpload})]})]})})]})}function ps({orders:s,onMarkAsPaid:i,onMobileBankingPayment:u}){const[a,p]=m.useState(null),[n,o]=m.useState(!1),[j,h]=m.useState(!1),[f,r]=m.useState(null),[c,g]=m.useState(null),[w,C]=m.useState(!1),k=t=>t.reduce((x,I)=>x+I.price*I.quantity,0),l=t=>{a&&(i(a.id,t),o(!1),p(null))},v=t=>{const x=t.target.files?.[0];if(x){r(x);const I=new FileReader;I.onload=y=>{g(y.target?.result)},I.readAsDataURL(x)}},T=async()=>{if(a&&f)try{C(!0),await Promise.resolve(u(a.id,f)),h(!1),o(!1),p(null),r(null),g(null)}catch(t){console.error("Mobile banking submit failed:",t),alert(t?.message?`Failed to submit payment: ${t.message}`:"Failed to submit payment. Please try again.")}finally{C(!1)}},N=()=>{const t=document.createElement("input");t.type="file",t.accept="image/*",t.capture="environment",t.onchange=x=>v(x),t.click()},d=()=>{const t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=x=>v(x),t.click()};return e.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[e.jsx("h2",{children:"Ready Orders"}),s.length===0?e.jsx(_,{className:"p-8 text-center text-gray-500",children:"No ready orders"}):e.jsx("div",{className:"space-y-3",children:s.map(t=>e.jsx(be,{orderId:t.id,orderNumber:t.orderNumber,tableNumber:t.tableNumber,status:t.status,itemCount:t.items.length,timeElapsed:t.timeElapsed,onClick:()=>p(t)},t.id))}),e.jsx(E,{open:!!a&&!n,onOpenChange:t=>{t||p(null)},children:e.jsxs(M,{children:[e.jsx(A,{children:e.jsxs($,{children:["Order #",a?.orderNumber||a?.id]})}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-600",children:["Table ",a.tableNumber]}),e.jsx(V,{className:"mt-2 bg-green-500 text-white border-0",children:"Ready for Pickup"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-2",children:"Items:"}),e.jsx("div",{className:"space-y-2",children:a.items.map((t,x)=>e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsxs("span",{children:[t.quantity,"x ",t.name]}),e.jsxs("span",{children:["$",(t.price*t.quantity).toFixed(2)]})]},x))})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["$",k(a.items).toFixed(2)]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>{alert(`Bill generated for Order #${a.orderNumber||a.id}
Total: $${k(a.items).toFixed(2)}`)},children:"Generate Bill"}),e.jsx(b,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>o(!0),children:"Mark as Paid"})]})]})]})}),e.jsx(E,{open:n,onOpenChange:t=>o(t),children:e.jsxs(M,{children:[e.jsx(A,{children:e.jsx($,{children:"Select Payment Method"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>l("cash"),children:"Cash"}),e.jsx(b,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>{o(!1),h(!0)},children:"Mobile Banking"})]})]})}),e.jsx(E,{open:j,onOpenChange:t=>{t||(h(!1),r(null),g(null))},children:e.jsxs(M,{children:[e.jsx(A,{children:e.jsx($,{children:"Mobile Banking Payment"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"Please capture or select the mobile banking payment proof:"}),c?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"border rounded-lg p-2",children:e.jsx("img",{src:c,alt:"Payment proof",className:"w-full h-48 object-cover rounded"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{variant:"outline",className:"flex-1",onClick:()=>{r(null),g(null)},children:"Retake"}),e.jsx(b,{className:"flex-1 bg-green-600 hover:bg-green-700 disabled:opacity-60",onClick:T,disabled:w,children:w?"Submitting...":"Submit Payment"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:N,children:"ðŸ“· Open Camera"}),e.jsx(b,{variant:"outline",className:"w-full",onClick:d,children:"ðŸ–¼ï¸ Choose from Gallery"})]})]})]})})]})}const ys=({selectedTable:s,setSelectedTable:i,currentScreen:u,setCurrentScreen:a,orders:p,readyOrders:n,handleMarkAsPaid:o,handlePickUp:j,handleCancelOrder:h,handleMobileBankingPayment:f,handleSubmitOrder:r,t:c,handleLogout:g})=>s!==null?e.jsx(us,{tableNumber:s,onBack:()=>i(null),onSubmitOrder:r,onLogout:g}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u==="default"&&e.jsx("div",{className:"p-6",children:e.jsx("button",{onClick:()=>i(0),className:"w-full py-6 text-white bg-blue-600 rounded-lg text-lg",children:c("createOrder")})}),u==="ready-orders"&&e.jsx(ps,{orders:n,onMarkAsPaid:o,onMobileBankingPayment:f}),u==="my-orders"&&e.jsx(xs,{orders:p,onMarkAsPaid:o,onPickUp:j,onCancelOrder:h,onMobileBankingPayment:f}),e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t",children:e.jsxs("div",{className:"flex justify-around",children:[e.jsxs("button",{onClick:()=>i(0),className:`flex-1 flex flex-col items-center py-3 ${s===0?"text-blue-600":"text-gray-600"}`,children:[e.jsx(Q,{className:"w-5 h-5"}),e.jsx("span",{className:"mt-1",children:c("createOrder")})]}),e.jsxs("button",{onClick:()=>a("ready-orders"),className:`flex-1 flex flex-col items-center py-3 ${u==="ready-orders"?"text-blue-600":"text-gray-600"}`,children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"mt-1",children:c("ready")})]}),e.jsxs("button",{onClick:()=>a("my-orders"),className:`flex-1 flex flex-col items-center py-3 ${u==="my-orders"?"text-blue-600":"text-gray-600"}`,children:[e.jsx(Q,{className:"w-5 h-5"}),e.jsx("span",{className:"mt-1",children:c("orders")})]}),e.jsxs("button",{onClick:g,className:"flex-1 flex flex-col items-center py-3 text-gray-600",children:[e.jsx(K,{className:"w-5 h-5"}),e.jsx("span",{className:"mt-1",children:c("logout")})]})]})})]});export{ys as WaiterRoutes};
